import{w as R}from"./entry.cC3cbjP8.js";import{q as w,T,U as G}from"./scheduler.1g6hPacP.js";import{R as O,a as h,d as A,b as j}from"./SettingsItem.svelte_svelte_type_style_lang.0Jx-B-y0.js";import{n as C,l as S}from"./index.26QDYMlJ.js";const H=R(0);function D(t){const e=t-1;return e*e*e+1}function I(t){return new Worker(""+new URL("../workers/worker-If9W0NHA.js",import.meta.url).href,{name:t==null?void 0:t.name})}function b(t){return Object.prototype.toString.call(t)==="[object Date]"}function c(t,e){if(t===e||t!==t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const o=e.map((s,r)=>c(t[r],s));return s=>o.map(r=>r(s))}if(n==="object"){if(!t||!e)throw new Error("Object cannot be null");if(b(t)&&b(e)){t=t.getTime(),e=e.getTime();const r=e-t;return a=>new Date(t+a*r)}const o=Object.keys(e),s={};return o.forEach(r=>{s[r]=c(t[r],e[r])}),r=>{const a={};return o.forEach(i=>{a[i]=s[i](r)}),a}}if(n==="number"){const o=e-t;return s=>t+s*o}throw new Error(`Cannot interpolate ${n} values`)}function M(t,e={}){const n=R(t);let o,s=t;function r(a,i){if(t==null)return n.set(t=a),Promise.resolve();s=a;let u=o,l=!1,{delay:W=0,duration:f=400,easing:E=T,interpolate:P=c}=w(w({},e),i);if(f===0)return u&&(u.abort(),u=null),n.set(t=s),Promise.resolve();const d=C()+W;let m;return o=S(y=>{if(y<d)return!0;l||(m=P(t,a),typeof f=="function"&&(f=f(t,a)),l=!0),u&&(u.abort(),u=null);const g=y-d;return g>f?(n.set(t=a),!1):(n.set(t=m(E(g/f))),!0)}),o.promise}return{set:r,update:(a,i)=>r(a(s,t),i),subscribe:n.subscribe}}const p=new I,U=M(0,{duration:100,easing:D});function L(t){h.updateRound(t,{state:A.Generating}),p.postMessage({type:"generate",round:t,players:G(j)})}function N(){p.postMessage({type:"reset"})}p.onmessage=t=>{if(t.data.type==="cb")U.set(t.data.percent);else if(t.data.type==="finish"){const{rounds:e,roundId:n}=t.data;_(n,e[n])}};function _(t,e){const n=e.map(o=>{const s=o.map(r=>({id:k[r].id,vp:0,gw:0,tp:0}));return{state:O.Waiting,players:s}});h.updateRound(t,{state:A.Generated,tables:n})}let k;j.subscribe(t=>k=t);export{U as a,D as c,L as g,N as r,H as s};

import"./index.UhkZy2tN.js";import{b as o}from"./entry.y-iIsHZA.js";import{p as z}from"./stores.Ji2PVZlp.js";import{a8 as A}from"./scheduler.Hj4Qi98n.js";function d(e){return"/"+e.split("/").filter(Boolean).join("/")}const B=(...e)=>e.map(d).filter(a=>a!=="/").reduce((a,t)=>a+t,"")||"/",N="$paraglide-adapter-sveltekit:context",p="__data.json",b=".html__data.json";function v(e){const a=[];return a.push(e.base),e.includeLanguage&&(!(e.lang===e.defaultLanguageTag)||e.prefixDefaultLanguage==="always")&&a.push(e.lang),a.push(e.path),e.dataSuffix&&a.push(p),B(...a)}const E=/\[(.*?)\]/g;function P(e){const a=e.match(E);if(!a)return[{type:"static",value:e}];const t=[];let n=0;for(const r of a){const s=e.indexOf(r,n),g=e.slice(n,s);g&&t.push({type:"static",value:g});const l=r.slice(1,-1);t.push({type:"param",name:l}),n=s+r.length}const u=e.slice(n);return u&&t.push({type:"static",value:u}),t}function y(e,a){let t;e:for(const n of a){const u=P(n),r={};let s=0;for(const i of u)if(i.type==="static"){if(i.value!==e.slice(s,s+i.value.length))continue e;s+=i.value.length}else if(i.type==="param"){let f=e.indexOf("/",s);f===-1&&(f=e.length),r[i.name]=e.slice(s,f),s=f}if(s!==e.length)continue;const g={id:n,params:r};if(!t){t=g;continue}const l=Object.keys(t.params).length,c=Object.keys(r).length;l<c||(l===c?t.id.length>n.length&&(t=g):t=g)}return t}function _(e,a){const t=P(e);let n="";for(const u of t)if(u.type==="static")n+=u.value;else{const r=a[u.name];if(!r)throw new Error(`Missing param ${u.name}`);n+=r}return n}function I(e,a,t){const n=y(e,Object.keys(t));if(!n)return e;const u=t[n.id];if(!u)return e;const r=u[a];return r?_(r,n.params):e}function T(e,a){e=d(e);const t=d(a.base),{availableLanguageTags:n,defaultLanguageTag:u}=a;let r=e.replace(t,"/");const s=r.endsWith(b)?b:r.endsWith(p)?p:void 0;s&&(r=r.replace(s,""));const[g,...l]=r.split("/").filter(Boolean);if(!g)return{base:t,lang:u,path:"/",dataSuffix:s};const c=n.includes(g)?g:u,i=n.includes(g)?d(l.join("/")):d(r);return{base:t,lang:c,path:i,dataSuffix:s}}function D(e,a,t){for(const[n,u]of Object.entries(t)){if(!(a in u))continue;const r=u[a];if(!r)continue;const s=y(e,[r]);if(s)return _(n,s.params)}return e}const k=({runtime:e,defaultLanguageTag:a},t)=>({resolve:n,event:u})=>{const{lang:r}=T(u.url.pathname,{availableLanguageTags:e.availableLanguageTags,defaultLanguageTag:a,base:o});return n(u,{transformPageChunk({html:s,done:g}){return g?s.replace(t.langPlaceholder,r):s}})},F=({defaultLanguageTag:e,runtime:a,translations:t})=>({url:n})=>{try{const{lang:u,path:r,dataSuffix:s}=T(n.pathname,{base:o,availableLanguageTags:a.availableLanguageTags,defaultLanguageTag:e}),g=D(r,u,t);return v({path:g,base:o,dataSuffix:s,includeLanguage:!1})}catch(u){return console.error(u),n.pathname}};function W(e,a){const t=(a==null?void 0:a.pathnames)??{},n=(a==null?void 0:a.exclude)??[],u=n.filter(l=>typeof l=="string"),r=n.filter(l=>l instanceof RegExp),s=(a==null?void 0:a.defaultLanguageTag)??e.sourceLanguageTag,g={runtime:e,translations:t,exclude:l=>!!(u.some(c=>l.startsWith(c))||r.some(c=>c.test(l))),defaultLanguageTag:s,prefixDefaultLanguage:(a==null?void 0:a.prefixDefaultLanguage)??"never"};return Object.freeze(t),Object.freeze(g),{config:g,reroute:()=>F(g),handle:l=>k(g,l),getLanguageFromUrl(l){const i=l.pathname.slice(h(o).length).split("/").filter(Boolean).at(0);return e.isAvailableLanguageTag(i)?i:s},route(l,c=void 0){if(g.exclude(l))return l;c=c??e.languageTag();const i=l.slice(h(o).length),f=I(i,c,t);return v({path:f,lang:c,base:h(o),dataSuffix:void 0,includeLanguage:!0,defaultLanguageTag:s,prefixDefaultLanguage:g.prefixDefaultLanguage})},getCanonicalPath(l){const{path:c,lang:i}=T(l,{base:h(o),availableLanguageTags:g.runtime.availableLanguageTags,defaultLanguageTag:g.defaultLanguageTag}),f=D(c,i,t);return h(o)+f}}}function h(e){return e==""||e.startsWith("/")?e:new URL(e,A(z).url).pathname}let L;const j="br",S=["br","en"];let m=()=>j;const w=e=>{typeof e=="function"?m=x(e):m=x(()=>e),L!==void 0&&L(m())};function x(e){return()=>{const a=e();if(!O(a))throw new Error("languageTag() didn't return a valid language tag. Check your setLanguageTag call");return a}}const R=e=>{L=e};function O(e){return S.includes(e)}const C=Object.freeze(Object.defineProperty({__proto__:null,availableLanguageTags:S,isAvailableLanguageTag:O,get languageTag(){return m},onSetLanguageTag:R,setLanguageTag:w,sourceLanguageTag:j},Symbol.toStringTag,{value:"Module"})),$=W(C);export{N as P,D as a,I as b,T as g,$ as i,m as l,d as n,v as s};
